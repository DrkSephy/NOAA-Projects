<!DOCTYPE html>

<head>
  <meta charset="utf-8">

  <style>
    .stop {
      fill: #C83D2D;
      stroke: #C83D2D;
      stroke-width: 0.01px;
    }

    .stop.active {
      stroke-width: 0.05px;
    }

    .voronoi-stops {
      fill: transparent;
      stroke-width: 0.001;
      stroke: #676767;
    }

    .text-tooltip {
      position: absolute;
      top: 0;
      right: 0;
      margin: 1em 1em 0 0;
      padding: 1em;
      font-size: 1.5em;
      background-color: #F2F2F2;
      border: 1px solid #222222;
    }
  </style>
</head>

<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>

  <script> 

    d3.json('granule-data.json', function(error, json){
      //console.log(json.data[0].IMAGE)
      var width = 878;
      var height = 500;

      var svg = d3.select("body")
        .append("svg")
        .attr("width", width)
        .attr("height", height)

      var svgPoints = svg.selectAll('g')
        .data(json)
        .enter()
        .append('g')

      svgPoints.append('circle')
        .attr('transform', function(d) { console.log(d); return "translate(" + d.LONGITUDE + ",", + d.LATITUDE + ")"; })
        .attr('r', 2);

      var voronoi = d3.geom.voronoi()
        .x(function(d) { return d.LONGITUDE; })
        .y(function(d) { return d.LATITUDE; })

      voronoi(json).forEach(function(v) { v.point.cell = v; });

      var buildPathFromPoint = function(point) {
        return "M" + point.cell.join("L") + "Z";
      }

      svgPoints.append("path")
        .attr("d", buildPathFromPoint);

    });

  </script>
</body>